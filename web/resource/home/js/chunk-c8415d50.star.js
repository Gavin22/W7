(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c8415d50"],{"0419":function(t,e,i){"use strict";i("65fd")},"40ee":function(t,e,i){t.exports=i.p+"img/empty-logo.png"},"4e8e":function(t,e,i){"use strict";i.r(e);i("7f7f");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"star-recycle"},[t.showAction?t._e():e("div",{staticClass:"search-box"},[e("div",{staticClass:"search-form"},[e("el-input",{attrs:{placeholder:"输入要搜索的平台"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getList(1)}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[e("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix"},on:{click:function(e){return t.getList(1)}},slot:"suffix"})])],1),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showAction=!0}}},[t._v("批量操作")])],1),t.showAction?e("div",{staticClass:"search-box"},[e("div",{staticClass:"search-form"},[e("el-checkbox",{on:{change:t.handleCheckedAll},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")]),e("div",{staticClass:"margin"},[t._v("\n        批量选择"),e("span",{staticClass:"color-primary"},[t._v(t._s(t.checkList.length))]),t._v("个\n      ")]),e("el-button",{staticClass:"btn-action",on:{click:function(e){return t.handleList("recover")}}},[t._v("恢复")]),e("el-button",{staticClass:"btn-action",on:{click:function(e){return t.handleList("delete")}}},[t._v("删除")])],1),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showAction=!1}}},[t._v("退出批量操作")])],1):t._e(),e("div",{staticClass:"recycle-list"},[e("el-checkbox-group",{on:{change:t.handleCheckedList},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},[t._l(t.list,(function(i,s){return[e("div",{key:s,staticClass:"recycle-item",on:{click:function(e){return t.changeItem(s)}}},[e("div",{staticClass:"recycle-item__box"},[e("div",{staticClass:"recycle-item__info"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:i.logo,expression:"item.logo"}],staticClass:"recycle-item__logo account-logo",attrs:{alt:""}}),e("div",{staticClass:"recycle-item__content"},[e("div",{staticClass:"recycle-item__name text-over"},[e("div",{staticClass:"star-item__name text-over"},[e("el-popover",{attrs:{placement:"bottom",content:i.name,disabled:i.name.length<7,"popper-class":"el-popover--desc",trigger:"hover"}},[e("div",{staticClass:"text-over",attrs:{slot:"reference"},slot:"reference"},[t._v(t._s(i.name))])])],1)]),e("div",{staticClass:"recycle-item__desc text-over"},[t._v(t._s(i.type_name))])])]),t.showAction?e("div",{staticClass:"recycle-item__right"},[e("el-checkbox",{staticClass:"item",attrs:{label:String(s)}})],1):t._e(),e("div",{staticClass:"recycle-item__action"},[t.showAction?t._e():[e("el-popover",{attrs:{placement:"bottom","popper-class":"star-popover",trigger:"hover",content:"恢复"}},[e("i",{staticClass:"el-icon-refresh-right",attrs:{slot:"reference"},on:{click:function(e){return t.recoverItem(i)}},slot:"reference"})]),e("el-popover",{attrs:{placement:"bottom","popper-class":"star-popover",trigger:"hover",content:"删除"}},[e("i",{staticClass:"el-icon-delete",attrs:{slot:"reference"},on:{click:function(e){return t.deleteItem(i)}},slot:"reference"})])]],2)])])]}))],2)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"recycle-list--empty"},[e("i",{staticClass:"el-icon-loading"}),t._v("\n      加载中\n  ")]),!t.loading&&t.finish&&t.page>2?e("div",{staticClass:"recycle-list--empty"},[t._v("\n      没有更多了\n  ")]):t._e(),0==t.list.length&&t.finish?e("div",{staticClass:"empty-data"},[e("img",{attrs:{src:i("40ee"),alt:""}})]):t._e()])},c=[],n=(i("ac6a"),i("456d"),{name:"starRecycle",props:{activeMenu:Object},data:function(){return{list:[],keyword:"",page:1,finish:!1,loading:!1,showAction:!1,checkAll:!1,checkList:[]}},methods:{postMessage:function(){window.parent&&window.postMessage&&this.$nextTick((function(){window.parent.postMessage({height:document.body.scrollHeight},"*")}))},postMessageLoad:function(){window.parent&&window.postMessage&&window.parent.postMessage({loaded:""},"*")},scroll:function(){var t=document.documentElement.scrollTop||document.body.scrollTop,e=document.querySelector(".star-recycle").offsetHeight-t-window.innerHeight;e<200&&!this.finish&&!this.loading&&this.getList(this.page+1)},getList:function(t){var e=this;t&&(this.page=t),this.loading=!0,this.$http.get(this.activeMenu.apiurl,{params:{keyword:this.keyword,page:this.page}}).then((function(t){e.loading=!1;var i=t.list?t.list:t;(0==i.length||t.total&&t.total/t.page_size<=e.page||"1"==e.activeMenu.one_page)&&(e.finish=!0),e.loading=!1,1==e.page&&(e.list=[]),e.list=e.list.concat(i),e.postMessage()})).catch((function(){return[e.loading=!1]}))},recoverItem:function(t){var e=this;this.$http.post("/index.php?c=account&a=recycle&do=recover",{uniacids:"string"===typeof t.uniacid?[t.uniacid]:t.uniacid}).then((function(t){e.$message({message:t||"修改成功",type:"success"}),e.checkList=[],e.checkAll=!1,e.getList(1)}))},deleteItem:function(t){var e=this;this.$confirm("此为永久删除，系统将自动删除该账号下所有系统相关信息（包括但不限于粉丝信息）,确认现在删除吗？").then((function(){e.$http.post("/index.php?c=account&a=recycle&do=delete",{uniacids:"string"===typeof t.uniacid?[t.uniacid]:t.uniacid,acids:"string"===typeof t.acid?[t.acid]:t.acid}).then((function(t){e.$message({message:t||"修改成功",type:"success",duration:3e3}),e.checkList=[],e.checkAll=!1,e.getList(1)}))}))},changeItem:function(t){t=String(t),-1!==this.checkList.indexOf(t)?this.checkList.splice(this.checkList.indexOf(t),1):this.checkList.push(t),this.handleCheckedList()},handleCheckedList:function(){this.checkAll=this.checkList.length==this.list.length},handleCheckedAll:function(t){this.checkList=t?Object.keys(this.list):[]},handleList:function(t){var e={uniacid:[],acid:[]};for(var i in this.checkList)e.uniacid.push(this.list[this.checkList[i]].uniacid),e.acid.push(this.list[this.checkList[i]].acid);"delete"==t?this.deleteItem(e):this.recoverItem(e)}},mounted:function(){var t=this;this.postMessageLoad(),this.getList(1),this.$nextTick((function(){document.addEventListener("scroll",t.scroll)}))},beforeDestroy:function(){document.removeEventListener("scroll",this.scroll)}}),o=n,a=(i("0419"),i("2877")),l=Object(a["a"])(o,s,c,!1,null,null,null);e["default"]=l.exports},"65fd":function(t,e,i){},"7f7f":function(t,e,i){var s=i("86cc").f,c=Function.prototype,n=/^\s*function ([^ (]*)/,o="name";o in c||i("9e1e")&&s(c,o,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})}}]);